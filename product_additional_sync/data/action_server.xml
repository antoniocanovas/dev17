<odoo>

    # BASE AUTOMATION SINCRONIZAR PRODUCTOS ALTERNATIVOS:
    <record id="product_tmpl_addtional_sync_aa" model="base.automation">
        <field name="name">=> AA Sale addtional product sync </field>
        <field name="model_id" ref="model_product_template"/>
        <field name="trigger">on_change</field>
        <field name="on_change_field_ids" eval="[(6,0, [ref('website_sale.field_product_template__alternative_product_ids')])]"/>
    </record>
    # SERVER ACTION para el automatismo DE SINCRONIZAR PRODUCTOS ALTERNATIVOS:
    <record id="product_tmpl_addtional_sync_as" model="ir.actions.server">
        <field name="name">=> AS Sale addtional product sync </field>
        <field name="model_id" ref="model_product_template"/>
        <field name="evaluation_type">value</field>
        <field name="state">code</field>
        <field name="code">
# ALTERNATIVES SYNC CODE (odoo without variants):
review_alternatives = []
before = record.last_alternative_product_ids
now = record.alternative_product_ids

for i in before:
  if i not in now: review_alternatives.append(i)
for i in now:
  if i not in before: review_alternatives.append(i)

for p in review_alternatives:
  alternatives = env['product.template'].search([('alternative_product_ids','in',p.id)]).ids
  if (p.id not in now.ids) and (record.id in alternatives):
    alternatives.remove(record.id)
  if (p.id in now.ids) and (record.id not in alternatives):
    alternatives.append(record.id)
  if p.alternative_product_ids != alternatives:
      p.write({'alternative_product_ids':[(6,0,alternatives)]})


# ACCESSORIES SYNC CODE:
review_accessories = []
before = record.last_accessory_product_ids
now = record.accessory_product_ids
recordpp = env['product.product'].search([('product_tmpl_id','=',record.id)])
if len(recordpp.ids) >1: recordpp = recordpp[0]

for i in before:
  if i not in now: review_accessories.append(i)
for i in now:
  if i not in before: review_accessories.append(i)

for p in review_accessories:
  accessories = env['product.product'].search([('accessory_product_ids','in',p.id)]).ids
  if (p.id not in now.ids) and (recordpp.id in accessories):
    accessories.remove(recordpp.id)
  if (p.id in now.ids) and (recordpp.id not in accessories):
    accessories.append(recordpp.id)
  if p.accessory_product_ids != accessories:
    p.write({'accessory_product_ids':[(6,0,accessories)]})

# SINGLE RECORD WRITE:
record.write(
            {'last_alternative_product_ids':[(6,0,record.alternative_product_ids.ids)],
            'last_accessory_product_ids':[(6,0,record.accessory_product_ids.ids)],
            })
        </field>
        <field name="base_automation_id" ref="product_tmpl_addtional_sync_aa"/>
    </record>

</odoo>